---
title: 補足：logoファイルを作成方法の詳細
---


本編ロゴファイルの作成方法は次の通りです。

<!--more-->

1. 変換対象の TS ファイルを「TS/番組名」ディレクトリの下に置く。

1. cmcuterAll.rb を実行する。   
   この段階では、logoファイルが存在しないので、スクリーンショットと
    wav ファイルを作業ディレクトリに作っただけで、エラーで止まる。

1. スクリーンショットが保存されたディレクトリを指定して
   logoAnalysisSub.py を実行する。
   ```sh
   % logoAnalysisSub.py --dir work/番組名/タイトル/SS
   ```
   
1. すると下記の様なスクリーンショット画像が表示される。

   ![ロゴの表示]({{site.baseurl}}/img/logosub.png)

   上段が元画像。下段は元画像をグレイスケール化＋強調したもの。

1. 下記のキー操作を行い下段のロゴマークが明瞭な時点まで移動し、
   画像を保存する。

   | キー      | 意味                                       |
   |-----------|--------------------------------------------|
   | j         | 60コマ( 30秒)飛ぶ                          |
   | k         | 60コマ( 30秒)戻る                          |
   | s         | 現在の画像をカレントディレクトリに保存する。|
   | b         | 前のコマ( 0.5秒)に戻る                     |
   | q         | 終了                                       |
   | 上記以外  | 次のコマ( 0.5秒)に進む                     |

1. 保存した画像を gimp を使って加工する。(同様な処理が行えるなら他のツールでも可)

   1. 下部部分のロゴマークを最小限の大きさで矩形領域の切り抜きをする。
      (「ツール」-> 「変形ツール」-> 「切り抜き」)
      ![gimp]({{site.baseurl}}/img/gimp.png)
   1. 「画像」-> 「モード」-> 「グレイスケール」で、グレイスケール化する。
   1. logo ディレクトリの下に、画像を保存する。


-----------------------------------------
### CM ロゴファイルの作成

放送局によって自局の番組CM にロゴを入っている事があるが、それが本編のロゴと紛らわしい
場合がある。

   ![本編ロゴと番宣ロゴ]({{site.baseurl}}/img/logoC.png)

+ 右側 番宣ロゴ
+ 左側 本編ロゴ

その場合は、番宣ロゴを本編ロゴと同様に作成して、:cmlogofn に指定する。

```
   XXXXX:
       :logofn: YYYY.png
       :cmlogofn: YYYY-CM.png
       :position: top-right
       :chapNum: 6
       :duration: 465
```

なおグレイスケール化した後の形状で区別出来ない場合は、グレイスケール化ぜずにカラーのままでロゴファイルを作成する。
(ただし、ロゴ解析の実行時間は長くなる。)

